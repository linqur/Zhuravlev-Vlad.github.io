<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title></title>

    <!-- Bootstrap -->
    <link rel="stylesheet" href="css/libs.min.css">
    	<link href="https://fonts.googleapis.com/css?family=Rubik+One" rel="stylesheet">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/main.css">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <style>
    	/*#search-company .block{
			width: 46%;
			min-height: 200px;
    	}*/
    	.search-company_map .fixed{
			right: 0 !important;
    	}
    	.sticky {
		  position: fixed;
		}
		.stop {
		  position: relative;
		}
    </style>
  </head>
  <body class="product">
<div class="container-fluid">
	<nav class="navfix top-nav-collapse">
		<div class="navbar navbar-top navbar-inverse row">
			<div class="container">
				<div class="navbar-collapse">
					<a class="navbar-brand" href="index.html">
						<h1>ILLI<i class="fa fa-search" aria-hidden="true"></i>UID</h1>
						<p>промышленный сток-центр</p>
					</a>
					<ul class="nav navbar-nav navbar-right">
						<li><a href="javascript:void(0)"><i class="fa fa-envelope" aria-hidden="true"></i>marketplace@bk.ru</a></li>
						<li><a href="javascript:void(0)"><i class="fa fa-phone" aria-hidden="true"></i>+ 7 960 06 00054</a></li>
						 <li class="navbar-last"><a href="user.html"><i class="fa fa-user" aria-hidden="true"></i>Профиль</a></li>
						 <li><a href="javascript:void(0)" class="btn btn-raised btn-sm exit">Выйти</a></li>
					</ul>
				</div>
			</div>
		</div>
		<div class="row">

			<div id="sticky" class="sticky-element">
				<div class="sticky-anchor"></div>
			   		<div class="sticky-content">
						<div class="navbar navbar-inverse navbar-bottom">
						<div class="container">
							<div class="navbar-header">
								<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-inverse-collapse">
									<span class="icon-bar"></span>
									<span class="icon-bar"></span>
									<span class="icon-bar"></span>
								</button>
							</div>
							<div class="navbar-collapse collapse navbar-inverse-collapse container">
								<form class="navbar-form navbar-right">
									<div class="form-group">
									  <input type="text" class="form-control col-md-8" placeholder="Поиск"><i class="fa fa-search form-group_search" aria-hidden="true"></i>
									</div>
								</form>
								<ul class="nav navbar-nav navbar-left">
								<li class="dropdown">
								    <a class="navbar-left_all-categorii" href="product.html"><i class="fa fa-bars" aria-hidden="true"></i>Товары</a>
								    <ul class="dropdown-menu hidden-xs">
								    <li class="divider"></li>
								    <div class="col-md-9">
								    	<div class="">
								    	<a href="">Кабель и провода</a>
									      <ul>
									      	<li><a href="">Подкатегория 1</a></li>
									      	<li><a href="">Подкатегория 2</a></li>
									      	<li><a href="">Подкатегория 3</a></li>
									      	<li><a href="">Подкатегория 4</a></li>
									      </ul>
								     	</div>
								     	<div class="">
								    	<a href="">Кабель и провода</a>
									      <ul>
									      	<li><a href="">Подкатегория 1</a></li>
									      	<li><a href="">Подкатегория 2</a></li>
									      	<li><a href="">Подкатегория 3</a></li>
									      	<li><a href="">Подкатегория 4</a></li>
									      </ul>
								     	</div>
								     	<div class="">
								    	<a href="">Кабель и провода</a>
									      <ul>
									      	<li><a href="">Подкатегория 1</a></li>
									      	<li><a href="">Подкатегория 2</a></li>
									      	<li><a href="">Подкатегория 3</a></li>
									      	<li><a href="">Подкатегория 4</a></li>
									      </ul>
								     	</div>
								     	<div class="">
								    	<a href="">Кабель и провода</a>
									      <ul>
									      	<li><a href="">Подкатегория 1</a></li>
									      	<li><a href="">Подкатегория 2</a></li>
									      	<li><a href="">Подкатегория 3</a></li>
									      	<li><a href="">Подкатегория 4</a></li>
									      </ul>
								     	</div>
								     	<div class="">
								    	<a href="">Кабель и провода</a>
									      <ul>
									      	<li><a href="">Подкатегория 1</a></li>
									      	<li><a href="">Подкатегория 2</a></li>
									      	<li><a href="">Подкатегория 3</a></li>
									      	<li><a href="">Подкатегория 4</a></li>
									      </ul>
								     	</div>
								     	<div class="">
								    	<a href="">Кабель и провода</a>
									      <ul>
									      	<li><a href="">Подкатегория 1</a></li>
									      	<li><a href="">Подкатегория 2</a></li>
									      	<li><a href="">Подкатегория 3</a></li>
									      	<li><a href="">Подкатегория 4</a></li>
									      </ul>
								     	</div>
								     	<div class="">
								    	<a href="">Кабель и провода</a>
									      <ul>
									      	<li><a href="">Подкатегория 1</a></li>
									      	<li><a href="">Подкатегория 2</a></li>
									      	<li><a href="">Подкатегория 3</a></li>
									      	<li><a href="">Подкатегория 4</a></li>
									      </ul>
								     	</div>
								     	<div class="">
								    	<a href="">Кабель и провода</a>
									      <ul>
									      	<li><a href="">Подкатегория 1</a></li>
									      	<li><a href="">Подкатегория 2</a></li>
									      	<li><a href="">Подкатегория 3</a></li>
									      	<li><a href="">Подкатегория 4</a></li>
									      </ul>
								     	</div>
								     	<div class="">
								    	<a href="">Кабель и провода</a>
									      <ul>
									      	<li><a href="">Подкатегория 1</a></li>
									      	<li><a href="">Подкатегория 2</a></li>
									      	<li><a href="">Подкатегория 3</a></li>
									      	<li><a href="">Подкатегория 4</a></li>
									      </ul>
								     	</div>
								     	</div>
								     	<div class="col-md-3">
								     		<img src="img/2.png" alt="">
								     	</div>
								    </ul>
								  </li>
								</ul>
								<ul class="nav navbar-nav navbar-left">
									<li>
										<a href="">Поставщики</a>
									</li>
								</ul>
							</div>
						</div>
					</div>
	   			</div>
			</div>
		</div>
	</nav>
</div>
<div class="container-fluid content">
	<div class="row">
		<div class="col-md-5" id="search-company">
			<div class="wrapper">
				<div class="wrapper_content">
					
				</div>
			</div>
		</div>
		<div class="col-md-7" id="aside1">
			<div id="map" style="width: 100%; height: 600px"></div>
		</div>
		</div>
	</div>
</div>

<footer class="container-fluid footer-top">
	<div class="container">
		<div class="row">
			<div class="col-xs-12">
				<div class="col-md-6 footer-top_left">
					<i class="fa fa-envelope" aria-hidden="true"></i>
					<p>Узнавайте о выгодных предложениях и получайте личные рекомендации</p>
				</div>
				<div class="form-group footer-top_right col-md-4">
				  <div class="input-group">
				    <input type="email" class="form-control" id="inputEmail" placeholder="Введите Email">
				    <span class="input-group-btn">
				      <a href="javascript:void(0)" class="btn btn-raised btn-default">Подписатся</a>
				    </span>
				  </div>
				</div>
			</div>	
		</div>
	</div>
</footer>
<footer class="container footer-bottom">
	<div class="row">
		<div class="col-md-3"><h4>Пользователям</h4>
			<ul>
				<li><a href="#">Как сделать заказ</a></li>
				<li><a href="#">Оплата</a></li>
				<li><a href="#">Доставка</a></li>
			</ul>
		</div>
		<div class="col-md-3"><h4>Поставщикам</h4>
			<ul>
				<li><a href="#">Регистрация компании</a></li>
				<li><a href="#">Регистрация товара</a></li>
				<li><a href="#">Обратная свзязь</a></li>
			</ul>
		</div>
		<div class="col-md-3"><h4>Правила</h4>
			<ul>
				<li><a href="#">Правила размещения товара</a></li>
				<li><a href="#">Котегории товаров</a></li>
			</ul>
		</div>
		<div class="col-md-3"><h4>Правила</h4>
			<ul>
				<li><a href="#">Правила размещения товара</a></li>
				<li><a href="#">Котегории товаров</a></li>
			</ul>
		</div>
	</div>
</footer>
	<script src="https://api-maps.yandex.ru/2.1/?load=package.full&lang=ru-RU" type="text/javascript"></script>
    <script src="js/libs.min.js"></script>
    <script src="js/common.js"></script>
    <script>
    	var myMap, collection, searchControl, objectManager;
        
        ymaps.ready(init);

        function init () {
		
			SearchControl = new ymaps.control.SearchControl({noPlacemark:true});	
		
            myMap = new ymaps.Map("map", {
                    center: [55.75629,37.618655], 
                    zoom: 16,
					type: 'yandex#map',
					behaviors: ['default', 'scrollZoom'],
					controls: ['zoomControl', SearchControl, 'typeSelector',  'fullscreenControl']
                }, {
                    balloonMaxWidth: 600
                });
				
		    objectManager = new ymaps.ObjectManager({
				clusterize: false,
				gridSize: 32
			});
            
	        objectManager.add({
	            type: 'Feature',	
	            id: 10,
	            geometry: {
	                type: 'Point',
	                coordinates: [55.754329,37.681272]
	            },
	            properties: {
	            	companyName: 'Company10',
	                hintContent: '1',
	                balloonContent: '1'
	            }
	        });

	        objectManager.add({
	            type: 'Feature',	
	            id: 11,
	            geometry: {
	                type: 'Point',
	                coordinates: [55.754329,37.685272]
	            },
	            properties: {
	            	companyName: 'Company11',
	                hintContent: '1',
	                balloonContent: '1'
	            }
	        });

			for(var i = 0; i < 15; i ++){
        	
	        	 objectManager.add({
	                type: 'Feature',	
	                id: i,
	                geometry: {
	                    type: 'Point',
	                    coordinates: [55.754329,37.621272]
	                },
	                properties: {
	                	companyName: 'Company' + i,
	                    hintContent: '1',
	                    balloonContent: '1'
	                }
	            });
	        }          


            myMap.geoObjects.add(objectManager); 
            

            var searchCompany = $('#search-company .wrapper_content');
            
            function contentGenerator(){
	            ymaps.geoQuery(objectManager.objects).searchInside(myMap).each(function (object) {

	                    var objectCompany = object.properties._data.companyName;
	                    searchCompany.append('<div class="block"><img src="img/IBM-logo-blue.png"><div class="description"><a href="#">' + objectCompany +'</a></div></div>');

				});
			}
			contentGenerator();
            myMap.events.add(['boundschange','datachange','objecttypeschange'], function(e){

            	searchCompany.find('.block').remove();

                contentGenerator();
			});
        }
    </script>
	<script>
	(function(){
		var a = document.querySelector('#aside1'), b = null, P = 80;
		window.addEventListener('scroll', Ascroll, false);
		document.body.addEventListener('scroll', Ascroll, false);
		function Ascroll() {
		  if (b == null) {
		    var Sa = getComputedStyle(a, ''), s = '';
		    for (var i = 0; i < Sa.length; i++) {
		      if (Sa[i].indexOf('overflow') == 0 || Sa[i].indexOf('padding') == 0 || Sa[i].indexOf('border') == 0 || Sa[i].indexOf('outline') == 0 || Sa[i].indexOf('box-shadow') == 0 || Sa[i].indexOf('background') == 0) {
		        s += Sa[i] + ': ' +Sa.getPropertyValue(Sa[i]) + '; '
		      }
		    }
		    b = document.createElement('div');
		    b.style.cssText = s + ' box-sizing: border-box; width: ' + a.offsetWidth + 'px;';
		    a.insertBefore(b, a.firstChild);
		    var l = a.childNodes.length;
		    for (var i = 1; i < l; i++) {
		      b.appendChild(a.childNodes[1]);
		    }
		    a.style.height = b.getBoundingClientRect().height + 'px';
		    a.style.padding = '0';
		    a.style.border = '0';
		  }
		  var Ra = a.getBoundingClientRect(),
		      R = Math.round(Ra.top + b.getBoundingClientRect().height - document.querySelector('footer').getBoundingClientRect().top + 25);  // селектор блока, при достижении верхнего края которого нужно открепить прилипающий элемент;  Math.round() только для IE; если ноль заменить на число, то блок будет прилипать до того, как нижний край элемента дойдёт до футера
		  if ((Ra.top - P) <= 0) {
		    if ((Ra.top - P) <= R) {
		      b.className = 'stop';
		      b.style.top = - R +'px';
		    } else {
		      b.className = 'sticky';
		      b.style.top = P + 'px';
		    }
		  } else {
		    b.className = '';
		    b.style.top = '';
		  }
		  window.addEventListener('resize', function() {
		    a.children[0].style.width = getComputedStyle(a, '').width
		  }, false);
		}
		})()
	</script>
  </body>
</html>